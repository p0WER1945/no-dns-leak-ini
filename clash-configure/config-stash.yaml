# æœºåœºè®¢é˜…é…ç½®
proxy-providers:
  sub0:
    url: "è®¢é˜…åœ°å€, ä¿ç•™å¼•å·"
    type: http
    interval: 86400
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300
    proxy: ç›´è¿

  # sub1:
  #   url: "è®¢é˜…åœ°å€, ä¿ç•™å¼•å·"
  #   type: http
  #   interval: 86400
  #   health-check:
  #     enable: true
  #     url: http://www.gstatic.com/generate_204
  #     interval: 300
  #   proxy: ç›´è¿

# åŸºæœ¬é…ç½®
port: 7890
socks-port: 7891
mixed-port: 7893
allow-lan: true
bind-address: "*"
mode: rule
log-level: info
ipv6: false

# DNS é…ç½®
dns:
  enable: true
  listen: 0.0.0.0:53
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  nameserver:
    - 223.5.5.5
    - 119.29.29.29
  fallback:
    - 8.8.8.8
    - 1.1.1.1

# ä»£ç†é…ç½®ï¼ˆæœºåœºè®¢é˜…ä¼šè‡ªåŠ¨æä¾›èŠ‚ç‚¹ï¼Œè¿™é‡Œåªéœ€è¦ä¿ç•™å¿…è¦çš„ç›´è¿ä»£ç†ï¼‰
proxies:
  - name: "ç›´è¿"
    type: direct

# ä»£ç†ç»„é…ç½®
proxy-groups:
  # ä¸»è¦èŠ‚ç‚¹é€‰æ‹©ç»„
  - name: ğŸš€ èŠ‚ç‚¹é€‰æ‹©
    type: select
    proxies:
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡-è‡ªåŠ¨
      - ğŸ‡­ğŸ‡° é¦™æ¸¯-è‡ªåŠ¨
      - ğŸ‡¨ğŸ‡³ å°æ¹¾-è‡ªåŠ¨
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬-è‡ªåŠ¨
      - ğŸ‡ºğŸ‡¸ ç¾å›½-è‡ªåŠ¨
      - ç›´è¿
    use:
      - sub0
      - sub1

  # æ–°åŠ å¡è‡ªåŠ¨é€‰æ‹©
  - name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡-è‡ªåŠ¨
    type: url-test
    use:
      - sub0
      - sub1
    filter: "(?i)(æ–°åŠ å¡|SG|å¡|ç‹®åŸ|Singapore)"
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 5
    timeout: 50
  
  # é¦™æ¸¯è‡ªåŠ¨é€‰æ‹©
  - name: ğŸ‡­ğŸ‡° é¦™æ¸¯-è‡ªåŠ¨
    type: url-test
    use:
      - sub0
      - sub1
    filter: "(?i)(é¦™æ¸¯|HK|Hong Kong|HongKong)"
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 5
    timeout: 50
  
  # å°æ¹¾è‡ªåŠ¨é€‰æ‹©
  - name: ğŸ‡¨ğŸ‡³ å°æ¹¾-è‡ªåŠ¨
    type: url-test
    use:
      - sub0
      - sub1
    filter: "(?i)(å°æ¹¾|å°ç£|TW|Taiwan)"
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 5
    timeout: 50
  
  # æ—¥æœ¬è‡ªåŠ¨é€‰æ‹©
  - name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬-è‡ªåŠ¨
    type: url-test
    use:
      - sub0
      - sub1
    filter: "(?i)(æ—¥æœ¬|JP|ä¸œäº¬|å¤§é˜ª|Japan)"
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 5
    timeout: 50
  
  # ç¾å›½è‡ªåŠ¨é€‰æ‹©
  - name: ğŸ‡ºğŸ‡¸ ç¾å›½-è‡ªåŠ¨
    type: url-test
    use:
      - sub0
      - sub1
    filter: "(?i)(ç¾|US|çº½çº¦|æ´›æ‰|United States)"
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 5
    timeout: 50

# è§„åˆ™åŒ¹é…éƒ¨åˆ†
rules:
  # ç›´æ¥åŸŸåè§„åˆ™
  - DOMAIN-SUFFIX,xn--ngstr-lra8j.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-SUFFIX,services.googleapis.cn,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  
  # å¤–éƒ¨è§„åˆ™é›† - Google CN ä»£ç†
  - RULE-SET,google_cn_proxy,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  
  # æœ¬åœ°ç½‘ç»œå’Œè§£å°è§„åˆ™ - ç›´è¿
  - RULE-SET,local_area_network,ç›´è¿
  - RULE-SET,unban,ç›´è¿
  
  # ä¸­å›½åŸŸåå’Œåª’ä½“ - ç›´è¿
  - RULE-SET,china_domain,ç›´è¿
  - RULE-SET,china_media,ç›´è¿
  
  # å¹¿å‘Šæ‹¦æˆªè§„åˆ™
  - RULE-SET,ban_ad,REJECT
  - RULE-SET,ban_program_ad,REJECT
  
  # ä¸­å›½IPç›¸å…³ - ç›´è¿
  - RULE-SET,china_company_ip,ç›´è¿,no-resolve
  - RULE-SET,china_ip,ç›´è¿,no-resolve
  
  # åœ°ç†ä½ç½®è§„åˆ™
  - GEOIP,CN,ç›´è¿,no-resolve
  
  # å…œåº•è§„åˆ™
  - MATCH,ğŸš€ èŠ‚ç‚¹é€‰æ‹©

# è§„åˆ™é›†é…ç½®
rule-providers:
  # Google CN ä»£ç†IPè§„åˆ™é›†
  google_cn_proxy:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/GoogleCNProxyIP.list"
    path: ./ruleset/GoogleCNProxyIP.list
    interval: 86400
  
  # æœ¬åœ°ç½‘ç»œè§„åˆ™é›†
  local_area_network:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/LocalAreaNetwork.list"
    path: ./ruleset/LocalAreaNetwork.list
    interval: 86400
  
  # è§£å°è§„åˆ™é›†
  unban:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/UnBan.list"
    path: ./ruleset/UnBan.list
    interval: 86400
  
  # ä¸­å›½åŸŸåè§„åˆ™é›†
  china_domain:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaDomain.list"
    path: ./ruleset/ChinaDomain.list
    interval: 86400
  
  # ä¸­å›½åª’ä½“è§„åˆ™é›†
  china_media:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaMedia.list"
    path: ./ruleset/ChinaMedia.list
    interval: 86400
  
  # å¹¿å‘Šæ‹¦æˆªè§„åˆ™é›†
  ban_ad:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanAD.list"
    path: ./ruleset/BanAD.list
    interval: 86400
  
  # ç¨‹åºå¹¿å‘Šæ‹¦æˆªè§„åˆ™é›†
  ban_program_ad:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanProgramAD.list"
    path: ./ruleset/BanProgramAD.list
    interval: 86400
  
  # ä¸­å›½å…¬å¸IPè§„åˆ™é›†
  china_company_ip:
    type: http
    behavior: ipcidr
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaCompanyIp.list"
    path: ./ruleset/ChinaCompanyIp.list
    interval: 86400
  
  # ä¸­å›½IPè§„åˆ™é›†
  china_ip:
    type: http
    behavior: ipcidr
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaIp.list"
    path: ./ruleset/ChinaIp.list
    interval: 86400